{"ast":null,"code":"import React from'react';import{Col}from'react-bootstrap';import{Button}from'@mui/material';import{translateFileDocumentAsync,translationAndDetectFileAsync}from'../../../redux/actions/translateFileAction';import LoadingButton from'@mui/lab/LoadingButton';import{STATE}from'../../../redux/reducers/translateFileReducer';import{useTranslation}from'react-i18next';import styles from'../translateStyle.module.css';import{connect}from'react-redux';import{isNull}from'lodash';import{downloadFile}from'../../../helpers/axiosHelper';import{jsx as _jsx}from\"react/jsx-runtime\";function TranslateFileDocumentOutput(props){var translationFileState=props.translationFileState,translationState=props.translationState;var _useTranslation=useTranslation(),t=_useTranslation.t;/**\n \t* @description Function dịch từ, (Ấn enter hoặc ấn nút dịch từ)\n\t* 1. Trong trường hợp có kết quả dịch => reset lại kết quả dịch về rỗng => gọi lại dịch\n\t* 2. Còn lại thì dịch vs 2 TH => sourcelang === null (Nhận dạng ngôn ngữ) và sourcelang === vi,cn .. \n \t*/var handleTranslate=function handleTranslate(){if(translationState.translateCode.sourceLang){var formData=new FormData();formData.append('file',translationFileState.documentFile);formData.append('sourceLang',translationState.translateCode.sourceLang);formData.append('targetLang',translationState.translateCode.targetLang);props.translateFileDocumentAsync(formData);}else{props.translationAndDetectFileAsync({sourceFile:translationFileState.documentFile,targetLang:translationState.translateCode.targetLang});}};var isDisableTranslateButton=function isDisableTranslateButton(){if(translationFileState.currentState===STATE.LOADING){return true;}if(translationFileState.documentFile===null&&!props.isTranslate){return true;}// if(translationState.translateCode.sourceLang === null) {\n// \treturn true;\n// }\nreturn false;};var isDetect=function isDetect(){return translationState.translateCode.sourceLang==null||translationState.translateCode.detectLang!=null;};var buttonTextDich=function buttonTextDich(){switch(translationFileState.outputDocumentFile.target_lang){case'vi':return t('taiTaiLieuTiengViet');case'en':return t('taiTaiLieuTiengAnh');case'zh':return t('taiTaiLieuTiengTrung');case'lo':return t('taiTaiLieuTiengLao');case'km':return t('taiTaiLieuTiengKhome');default:return t('taiTaiLieu');}};return/*#__PURE__*/_jsx(Col,{md:6,className:styles.ResultTranslateBox,style:{backgroundColor:isNull(translationFileState.documentFile)?'#f3f3f3':'white'},children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:isNull(translationFileState.documentFile)?'#f3f3f3':'white',display:'flex',paddingTop:10,paddingBottom:10,justifyContent:'start'},children:translationFileState.outputDocumentFile&&translationFileState.documentFile?/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",onClick:function onClick(){return downloadFile(translationFileState.documentFile,translationFileState.outputDocumentFile.target_file_full_path,translationFileState.outputDocumentFile.file_type);},children:buttonTextDich()}):/*#__PURE__*/_jsx(LoadingButton,{variant:\"contained\",onClick:handleTranslate,loading:translationFileState.currentState===STATE.LOADING,disabled:isDisableTranslateButton(),style:{fontWeight:'bold',display:'flex'},children:isDetect()?t('detectAndTranslate'):t('dich')})})});}var mapStateToProps=function mapStateToProps(state){return{translationState:state.translateReducer,translationFileState:state.translateFileReducer};};var mapDispatchToProps={translateFileDocumentAsync:translateFileDocumentAsync,translationAndDetectFileAsync:translationAndDetectFileAsync};export default connect(mapStateToProps,mapDispatchToProps)(TranslateFileDocumentOutput);","map":{"version":3,"sources":["/home/hoangta/workspace/translation-backend/frontend/src/screens/TranslationScreen/components/TranslateFileDocumentOutput.js"],"names":["React","Col","Button","translateFileDocumentAsync","translationAndDetectFileAsync","LoadingButton","STATE","useTranslation","styles","connect","isNull","downloadFile","TranslateFileDocumentOutput","props","translationFileState","translationState","t","handleTranslate","translateCode","sourceLang","formData","FormData","append","documentFile","targetLang","sourceFile","isDisableTranslateButton","currentState","LOADING","isTranslate","isDetect","detectLang","buttonTextDich","outputDocumentFile","target_lang","ResultTranslateBox","backgroundColor","display","paddingTop","paddingBottom","justifyContent","target_file_full_path","file_type","fontWeight","mapStateToProps","state","translateReducer","translateFileReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { \n\tCol,\n} from 'react-bootstrap';\nimport { Button } from '@mui/material';\nimport { translateFileDocumentAsync, translationAndDetectFileAsync } from '../../../redux/actions/translateFileAction';\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport { STATE } from '../../../redux/reducers/translateFileReducer';\nimport { useTranslation } from 'react-i18next';\nimport styles from '../translateStyle.module.css';\nimport { connect } from 'react-redux';\nimport { isNull } from 'lodash';\nimport { downloadFile } from '../../../helpers/axiosHelper';\n\n\nfunction TranslateFileDocumentOutput(props) {\n\tconst { translationFileState, translationState } = props;\n\tconst { t } = useTranslation();\n\n\t/**\n \t* @description Function dịch từ, (Ấn enter hoặc ấn nút dịch từ)\n\t* 1. Trong trường hợp có kết quả dịch => reset lại kết quả dịch về rỗng => gọi lại dịch\n\t* 2. Còn lại thì dịch vs 2 TH => sourcelang === null (Nhận dạng ngôn ngữ) và sourcelang === vi,cn .. \n \t*/\n\tconst handleTranslate = () => {\n\t\tif(translationState.translateCode.sourceLang){\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('file', translationFileState.documentFile);\n\t\t\tformData.append('sourceLang', translationState.translateCode.sourceLang);\n\t\t\tformData.append('targetLang', translationState.translateCode.targetLang);\n\t\t\tprops.translateFileDocumentAsync(formData);\n\t\t} else {\n\t\t\tprops.translationAndDetectFileAsync({\n\t\t\t\tsourceFile: translationFileState.documentFile,\n\t\t\t\ttargetLang: translationState.translateCode.targetLang,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst isDisableTranslateButton = () => {\n\t\tif(translationFileState.currentState === STATE.LOADING) {\n\t\t\treturn true;\n\t\t}\n\t\tif(translationFileState.documentFile === null && !props.isTranslate) {\n\t\t\treturn true;\n\t\t}\n\t\t// if(translationState.translateCode.sourceLang === null) {\n\t\t// \treturn true;\n\t\t// }\n\t\treturn false;\n\t};\n\n\tconst isDetect = () =>{ \n\t\treturn (translationState.translateCode.sourceLang == null || translationState.translateCode.detectLang != null);\n\t};\n\n\tconst buttonTextDich = () => {\n\t\tswitch (translationFileState.outputDocumentFile.target_lang) {\n\t\tcase 'vi':\n\t\t\treturn t('taiTaiLieuTiengViet');\n\t\tcase 'en':\n\t\t\treturn t('taiTaiLieuTiengAnh');\n\t\tcase 'zh':\n\t\t\treturn t('taiTaiLieuTiengTrung');\n\t\tcase 'lo':\n\t\t\treturn t('taiTaiLieuTiengLao');\n\t\tcase 'km':\n\t\t\treturn t('taiTaiLieuTiengKhome');\n\t\tdefault:\n\t\t\treturn t('taiTaiLieu');\n\t\t}\n\t};\n\n\treturn (\n\t\t<Col \n\t\t\tmd={6} \n\t\t\tclassName={styles.ResultTranslateBox} \n\t\t\tstyle={{\n\t\t\t\tbackgroundColor: isNull(translationFileState.documentFile) ? '#f3f3f3' : 'white'\n\t\t\t}}>\n\t\t\t<div style={{\n\t\t\t\tbackgroundColor: isNull(translationFileState.documentFile) ? '#f3f3f3' : 'white' , \n\t\t\t\tdisplay: 'flex', \n\t\t\t\tpaddingTop: 10,\n\t\t\t\tpaddingBottom: 10,\n\t\t\t\tjustifyContent: 'start'\n\t\t\t}}>\n\t\t\t\t{(translationFileState.outputDocumentFile && translationFileState.documentFile) ? \n\t\t\t\t\t<Button \n\t\t\t\t\t\tvariant=\"contained\" \n\t\t\t\t\t\tcolor=\"success\" \n\t\t\t\t\t\tonClick={() => downloadFile(translationFileState.documentFile, translationFileState.outputDocumentFile.target_file_full_path, translationFileState.outputDocumentFile.file_type)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{buttonTextDich()}\n\t\t\t\t\t</Button> : <LoadingButton \n\t\t\t\t\t\tvariant=\"contained\" \n\t\t\t\t\t\tonClick={handleTranslate}\n\t\t\t\t\t\tloading={translationFileState.currentState === STATE.LOADING}\n\t\t\t\t\t\tdisabled={isDisableTranslateButton()}\n\t\t\t\t\t\tstyle={{ fontWeight: 'bold', display: 'flex'}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isDetect() ? t('detectAndTranslate') : t('dich')}\n\t\t\t\t\t</LoadingButton>}\n\t\t\t</div>\n\t\t</Col>\n\t);\n}\n\nTranslateFileDocumentOutput.propTypes = {\n\tisTranslate: PropTypes.bool.isRequired,\n\ttranslationState: PropTypes.object,\n\ttranslationFileState: PropTypes.object,\n\ttranslateFileDocumentAsync: PropTypes.func,\n\ttranslationAndDetectFileAsync: PropTypes.func,\n};\n\nconst mapStateToProps = (state) => ({ \n\ttranslationState: state.translateReducer,\n\ttranslationFileState: state.translateFileReducer \n});\n\nconst mapDispatchToProps = { \n\ttranslateFileDocumentAsync,\n\ttranslationAndDetectFileAsync\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranslateFileDocumentOutput);\n"]},"metadata":{},"sourceType":"module"}