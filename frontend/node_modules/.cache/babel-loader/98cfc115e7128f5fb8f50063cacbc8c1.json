{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/hoangta/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/workspace/hoangta/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/workspace/hoangta/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{GETHISTORY,GETHISTORY_FAIL,GETHISTORY_SUCCESS,CHANGEHISTORY}from'../constant/historyTypes';import*as axiosHelper from'../../helpers/axiosHelper';/**\n * @description change current history\n */export function changeHistory(data){return{type:CHANGEHISTORY,payload:{data:data}};}/**\n * @description get history\n */export function getHistoryLoading(){return{type:GETHISTORY};}/**\n * @description Thành công và trả về kết quả dịch\n */export function getHistorySuccess(list,total){return{type:GETHISTORY_SUCCESS,payload:{data:list,total:total}};}/**\n * @description Thành công và trả về err\n */export function getHistoryFailed(err){return{type:GETHISTORY_FAIL,payload:{err:err}};}/**\n * @description Thunk function cho việc dịch từ và lấy kết quả\n */ // params: object\nexport var getHistoryAsync=function getHistoryAsync(params){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var result,list;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(getHistoryLoading());_context2.prev=1;_context2.next=4;return axiosHelper.getTranslateHistory(params);case 4:result=_context2.sent;_context2.next=7;return Promise.all(result.data.list.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axiosHelper.getTranslateResult(item.resultUrl);case 2:result=_context.sent;return _context.abrupt(\"return\",_objectSpread({id:item.id},result));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()));case 7:list=_context2.sent;dispatch(getHistorySuccess(list,result.data.total_entries));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);dispatch(getHistoryFailed(_context2.t0));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};","map":{"version":3,"sources":["/workspace/hoangta/translation-backend/frontend/src/redux/actions/historyAction.js"],"names":["GETHISTORY","GETHISTORY_FAIL","GETHISTORY_SUCCESS","CHANGEHISTORY","axiosHelper","changeHistory","data","type","payload","getHistoryLoading","getHistorySuccess","list","total","getHistoryFailed","err","getHistoryAsync","params","dispatch","getTranslateHistory","result","Promise","all","map","item","getTranslateResult","resultUrl","id","total_entries"],"mappings":"8eAAA,OACCA,UADD,CAECC,eAFD,CAGCC,kBAHD,CAICC,aAJD,KAKO,0BALP,CAMA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,2BAA7B,CAEA;AACA;AACA,GACA,MAAO,SAASC,CAAAA,aAAT,CAAuBC,IAAvB,CAA6B,CACnC,MAAO,CACLC,IAAI,CAAEJ,aADD,CAELK,OAAO,CAAE,CACTF,IAAI,CAAJA,IADS,CAFJ,CAAP,CAMA,CAED;AACA;AACA,GACA,MAAO,SAASG,CAAAA,iBAAT,EAA6B,CACnC,MAAO,CACLF,IAAI,CAAEP,UADD,CAAP,CAGA,CAED;AACA;AACA,GACA,MAAO,SAASU,CAAAA,iBAAT,CAA2BC,IAA3B,CAAiCC,KAAjC,CAAwC,CAC9C,MAAO,CACLL,IAAI,CAAEL,kBADD,CAELM,OAAO,CAAE,CACTF,IAAI,CAAEK,IADG,CAETC,KAAK,CAALA,KAFS,CAFJ,CAAP,CAOA,CAED;AACA;AACA,GACA,MAAO,SAASC,CAAAA,gBAAT,CAA0BC,GAA1B,CAA+B,CACrC,MAAO,CACLP,IAAI,CAAEN,eADD,CAELO,OAAO,CAAE,CACTM,GAAG,CAAHA,GADS,CAFJ,CAAP,CAMA,CAED;AACA;AACA,G,CACA;AACA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,MAAD,iGAAY,kBAAOC,QAAP,sIAC1CA,QAAQ,CAACR,iBAAiB,EAAlB,CAAR,CAD0C,wCAGpBL,CAAAA,WAAW,CAACc,mBAAZ,CAAgCF,MAAhC,CAHoB,QAGnCG,MAHmC,uCAItBC,CAAAA,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACb,IAAP,CAAYK,IAAZ,CAAiBW,GAAjB,2FAAqB,iBAAOC,IAAP,mJAC9BnB,CAAAA,WAAW,CAACoB,kBAAZ,CAA+BD,IAAI,CAACE,SAApC,CAD8B,QAC7CN,MAD6C,8DAGlDO,EAAE,CAAEH,IAAI,CAACG,EAHyC,EAI/CP,MAJ+C,yDAArB,iEAAZ,CAJsB,QAInCR,IAJmC,gBAWzCM,QAAQ,CAACP,iBAAiB,CAACC,IAAD,CAAOQ,MAAM,CAACb,IAAP,CAAYqB,aAAnB,CAAlB,CAAR,CAXyC,qFAazCV,QAAQ,CAACJ,gBAAgB,cAAjB,CAAR,CAbyC,uEAAZ,gEAAxB","sourcesContent":["import { \n\tGETHISTORY, \n\tGETHISTORY_FAIL, \n\tGETHISTORY_SUCCESS,\n\tCHANGEHISTORY\n} from '../constant/historyTypes';\nimport * as axiosHelper from '../../helpers/axiosHelper';\n\n/**\n * @description change current history\n */\nexport function changeHistory(data) {\n\treturn {\n\t  type: CHANGEHISTORY,\n\t  payload: {\n\t\t\tdata,\n\t\t}\n\t};\n}\n\n/**\n * @description get history\n */\nexport function getHistoryLoading() {\n\treturn {\n\t  type: GETHISTORY,\n\t};\n}\n\n/**\n * @description Thành công và trả về kết quả dịch\n */\nexport function getHistorySuccess(list, total) {\n\treturn {\n\t  type: GETHISTORY_SUCCESS,\n\t  payload: {\n\t\t\tdata: list,\n\t\t\ttotal,\n\t\t}\n\t};\n}\n\n/**\n * @description Thành công và trả về err\n */\nexport function getHistoryFailed(err) {\n\treturn {\n\t  type: GETHISTORY_FAIL,\n\t  payload: {\n\t\t\terr,\n\t\t}\n\t};\n}\n\n/**\n * @description Thunk function cho việc dịch từ và lấy kết quả\n */\n// params: object\nexport const getHistoryAsync = (params) => async (dispatch) => {\n\tdispatch(getHistoryLoading());\n\ttry {\n\t\tconst result = await axiosHelper.getTranslateHistory(params);\n\t\tconst list = await Promise.all(result.data.list.map(async (item) => {\n\t\t\tconst result = await axiosHelper.getTranslateResult(item.resultUrl);\n\t\t\treturn {\n\t\t\t\tid: item.id,\n\t\t\t\t...result\n\t\t\t};\n\t\t}));\n\t\tdispatch(getHistorySuccess(list, result.data.total_entries));\n\t}catch(e) {\n\t\tdispatch(getHistoryFailed(e));\n\t}\n};"]},"metadata":{},"sourceType":"module"}