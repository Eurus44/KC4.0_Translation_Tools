{"ast":null,"code":"import _regeneratorRuntime from\"/home/hoangta/workspace/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hoangta/workspace/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/hoangta/workspace/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Modal,Form,Row,Col,Input,Spin}from'antd';import*as axiosHelper from'../../../../helpers/axiosHelper';// import { useDispatch } from 'react-redux';\nimport{useTranslation}from'react-i18next';import{toast}from'react-toastify';import{STATUS_CODE}from'../../../../constants/common';import styles from'./index.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditQuotaModal=function EditQuotaModal(props){// const dispatch = useDispatch();\nvar _useTranslation=useTranslation(),t=_useTranslation.t;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var visible=props.visible,setVisible=props.setVisible,userId=props.userId;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsloading=_useState4[1];var onCancel=function onCancel(){setVisible(false);};var fetchUserData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axiosHelper.getUser(userId);case 2:result=_context.sent;return _context.abrupt(\"return\",result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchUserData(_x){return _ref.apply(this,arguments);};}();useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _userData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetchUserData(userId);case 2:_userData=_context2.sent;;setUserData({username:_userData.username,text_quota_vi_en:_userData.textTranslationQuota['vi-en'],text_quota_vi_zh:_userData.textTranslationQuota['vi-zh'],text_quota_vi_lo:_userData.textTranslationQuota['vi-lo'],text_quota_vi_km:_userData.textTranslationQuota['vi-km']});setIsloading(false);case 6:case\"end\":return _context2.stop();}}},_callee2);})),[visible]);var onSubmit=function onSubmit(){form.submit();};var onCreate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(values){var new_values,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;// const new_values = (({ username, password, email, last_name, first_name, role, status }) => ({ username, password, email, last_name, first_name, role, status }))(values);\nnew_values={};new_values['text_translation_quota']={'vi-en':values.text_quota_vi_en,'vi-zh':values.text_quota_vi_zh,'vi-lo':values.text_quota_vi_lo,'vi-km':values.text_quota_vi_km};new_values['id']=userId;_context3.next=6;return axiosHelper.updateUserQuota(new_values);case 6:result=_context3.sent;if(result.code===STATUS_CODE.success){toast.success(t('updateSuccess'));}setVisible(false);_context3.next=15;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);toast(_context3.t0);setVisible(false);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function onCreate(_x2){return _ref3.apply(this,arguments);};}();if(isLoading)return/*#__PURE__*/_jsx(Spin,{});return/*#__PURE__*/_jsx(Modal,{visible:visible,title:t('updateUserQuota'),okText:t('edit'),cancelText:t('cancel'),onCancel:onCancel,onOk:onSubmit,children:/*#__PURE__*/_jsx(Form,{layout:\"vertical\",form:form,onFinish:onCreate,initialValues:userData,children:/*#__PURE__*/_jsxs(Row,{gutter:12,children:[/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.user,children:[t('member'),\": \",userData.username]})}),/*#__PURE__*/_jsx(Col,{xs:24,md:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"text_quota_vi_en\",label:t('textViEn'),rules:[{required:true,message:t('requiredField')}],children:/*#__PURE__*/_jsx(Input,{type:\"number\",suffix:t('sentence'),className:styles.formQuota})})}),/*#__PURE__*/_jsx(Col,{xs:24,md:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"text_quota_vi_zh\",label:t('textViZh'),rules:[{required:true,message:t('requiredField')}],children:/*#__PURE__*/_jsx(Input,{type:\"number\",suffix:t('sentence'),className:styles.formQuota})})}),/*#__PURE__*/_jsx(Col,{xs:24,md:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"text_quota_vi_lo\",label:t('textViLo'),rules:[{required:true,message:t('requiredField')}],children:/*#__PURE__*/_jsx(Input,{type:\"number\",suffix:t('sentence'),className:styles.formQuota})})}),/*#__PURE__*/_jsx(Col,{xs:24,md:12,children:/*#__PURE__*/_jsx(Form.Item,{name:\"text_quota_vi_km\",label:t('textViKm'),rules:[{required:true,message:t('requiredField')}],children:/*#__PURE__*/_jsx(Input,{type:\"number\",suffix:t('sentence'),className:styles.formQuota})})})]})})});};export default EditQuotaModal;","map":{"version":3,"sources":["/home/hoangta/workspace/translation-backend/frontend/src/screens/UserManagement/components/EditQuotaModal/index.js"],"names":["React","useEffect","useState","Modal","Form","Row","Col","Input","Spin","axiosHelper","useTranslation","toast","STATUS_CODE","styles","EditQuotaModal","props","t","useForm","form","visible","setVisible","userId","userData","setUserData","isLoading","setIsloading","onCancel","fetchUserData","getUser","result","data","_userData","username","text_quota_vi_en","textTranslationQuota","text_quota_vi_zh","text_quota_vi_lo","text_quota_vi_km","onSubmit","submit","onCreate","values","new_values","updateUserQuota","code","success","user","required","message","formQuota"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Modal, Form, Row, Col, Input, Spin } from 'antd';\nimport PropTypes from 'prop-types';\nimport * as axiosHelper from '../../../../helpers/axiosHelper';\n// import { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'react-toastify';\nimport { STATUS_CODE } from '../../../../constants/common';\nimport styles from './index.module.css';\n\nconst EditQuotaModal = (props) => {\n\t// const dispatch = useDispatch();\n\tconst { t } = useTranslation();\n\tconst [form] = Form.useForm();\n\tconst { visible, setVisible, userId } = props;\n\tconst [userData, setUserData] = useState({});\n\tconst [isLoading, setIsloading] = useState(true);\n\tconst onCancel = () => {\n\t\tsetVisible(false);\n\t};\n\n\tconst fetchUserData = async (userId) => {\n\t\tconst result = await axiosHelper.getUser(userId);\n\t\treturn result.data;\n\t};\n\n\tuseEffect(async () => {\n\t\tconst _userData = await fetchUserData(userId);;\n\n\t\tsetUserData({\n\t\t\tusername: _userData.username,\n\t\t\ttext_quota_vi_en: _userData.textTranslationQuota['vi-en'],\n\t\t\ttext_quota_vi_zh: _userData.textTranslationQuota['vi-zh'],\n\t\t\ttext_quota_vi_lo: _userData.textTranslationQuota['vi-lo'],\n\t\t\ttext_quota_vi_km: _userData.textTranslationQuota['vi-km'],\n\t\t});\n\t\tsetIsloading(false);\n\t}, [visible]);\n\n\tconst onSubmit = () => {\n\t\tform.submit();\n\t};\n\n\tconst onCreate = async (values) => {\n\t\ttry {\n\t\t\t// const new_values = (({ username, password, email, last_name, first_name, role, status }) => ({ username, password, email, last_name, first_name, role, status }))(values);\n\t\t\tconst new_values = {};\n\n\t\t\tnew_values['text_translation_quota'] = {\n\t\t\t\t'vi-en': values.text_quota_vi_en,\n\t\t\t\t'vi-zh': values.text_quota_vi_zh,\n\t\t\t\t'vi-lo': values.text_quota_vi_lo,\n\t\t\t\t'vi-km': values.text_quota_vi_km,\n\t\t\t};\n\n\t\t\tnew_values['id'] = userId;\n\n\t\t\tconst result = await axiosHelper.updateUserQuota(new_values);\n\n\t\t\tif (result.code === STATUS_CODE.success) {\n\t\t\t\ttoast.success(t('updateSuccess'));\n\t\t\t}\n\n\t\t\tsetVisible(false);\n\t\t} catch (e) {\n\t\t\ttoast(e);\n\t\t\tsetVisible(false);\n\t\t}\n\t};\n\n\tif (isLoading) return <Spin />;\n\n\treturn (<Modal\n\t\tvisible={visible}\n\t\ttitle={t('updateUserQuota')}\n\t\tokText={t('edit')}\n\t\tcancelText={t('cancel')}\n\t\tonCancel={onCancel}\n\t\tonOk={onSubmit}\n\t>\n\t\t<Form layout=\"vertical\" form={form} onFinish={onCreate} initialValues={userData}>\n\t\t\t<Row gutter={12}>\n\t\t\t\t<Col span={24}>\n\t\t\t\t\t<div className={styles.user}>{t('member')}: {userData.username}</div>\n\t\t\t\t</Col>\n\n\t\t\t\t<Col xs={24} md={12}>\n\t\t\t\t\t<Form.Item name='text_quota_vi_en' label={t('textViEn')} rules={[{ required: true, message: t('requiredField') }]}>\n\t\t\t\t\t\t<Input type=\"number\" suffix={t('sentence')} className={styles.formQuota} />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Col>\n\n\t\t\t\t<Col xs={24} md={12}>\n\t\t\t\t\t<Form.Item name='text_quota_vi_zh' label={t('textViZh')} rules={[{ required: true, message: t('requiredField') }]}>\n\t\t\t\t\t\t<Input type=\"number\" suffix={t('sentence')} className={styles.formQuota} />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Col>\n\t\t\t\t\n\t\t\t\t<Col xs={24} md={12}>\n\t\t\t\t\t<Form.Item name='text_quota_vi_lo' label={t('textViLo')} rules={[{ required: true, message: t('requiredField') }]}>\n\t\t\t\t\t\t<Input type=\"number\" suffix={t('sentence')} className={styles.formQuota} />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Col>\n\n\t\t\t\t<Col xs={24} md={12}>\n\t\t\t\t\t<Form.Item name='text_quota_vi_km' label={t('textViKm')} rules={[{ required: true, message: t('requiredField') }]}>\n\t\t\t\t\t\t<Input type=\"number\" suffix={t('sentence')} className={styles.formQuota} />\n\t\t\t\t\t</Form.Item>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</Form>\n\t</Modal>);\n};\n\nEditQuotaModal.propTypes = {\n\tvisible: PropTypes.bool,\n\tsetVisible: PropTypes.func,\n\tuserId: PropTypes.string,\n\n};\n\nexport default EditQuotaModal;"]},"metadata":{},"sourceType":"module"}