{"ast":null,"code":"import React,{useEffect}from'react';import styles from'./historyAndFavorite.module.css';import{Tab,Tabs,Typography,LinearProgress,Divider}from'@mui/material';import{connect}from'react-redux';import{useTranslation}from'react-i18next';import ResultComponent from'./components/ResultComponent';import{STATE}from'../../redux/reducers/historyReducer';import{getHistoryAsync}from'../../redux/actions/historyAction';import{isEmpty}from'lodash';import TranslationItem from'./components/TranslationItem';import Pagination from'@mui/material/Pagination';import authHoc from'../../hocs/authHoc';import{toastError}from'../../components/Toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PER_PAGE=9;var STATUS='translated';var TRANSLATIONTYPE='public_plain_text_translation';function HistoryAndFavorite(props){var historyState=props.historyState,navbarState=props.navbarState;var _useTranslation=useTranslation(),t=_useTranslation.t;/**\n\t * @description useEffect cho việc check kết quả và báo noti cho \n\t * người dùng\n\t */useEffect(function(){switch(historyState.currentState){case STATE.SUCCESS:break;case STATE.FAILURE:toastError(historyState.err);break;default:break;}},[historyState.currentState]);/**\n\t * @description useEffect cho việc gọi danh sách lúc đầu vào trang\n\t */useEffect(function(){props.getHistoryAsync({status:STATUS,translationType:TRANSLATIONTYPE,perPage:PER_PAGE,page:1});},[navbarState.isLogin]);/**\n\t * @description Hàm gọi danh sách khi thay đổi trang\n\t */var handleChange=function handleChange(event,value){props.getHistoryAsync({status:STATUS,translationType:TRANSLATIONTYPE,perPage:PER_PAGE,page:value});};/**\n\t * @description Trả về element chữ cho trường hợp danh sách rỗng\n\t */var TextListEmpty=function TextListEmpty(){return/*#__PURE__*/_jsx(Typography,{sx:{p:2},align:\"center\",variant:\"subtitle1\",children:t('danhSachTrong')});};/**\n\t * @description Tính toán số trang hiện thị ở pagnination\n\t * VD: total: 100 và perPage: 9, => getCount() trả về 12 \n\t * ? Kết quả thực tế là 11.111 => Làm tròn lên thành 12.\n\t */var getCount=function getCount(total){return Math.ceil(total/9);};return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flex:1,backgroundColor:'white',height:'94vh'},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.innerBox,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.tabBox,children:/*#__PURE__*/_jsx(Tabs,{value:\"history\",variant:\"scrollable\",scrollButtons:\"auto\",children:/*#__PURE__*/_jsx(Tab,{label:t('History.lichsu'),value:'history',style:{fontWeight:'bold'}})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.innerBody,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.innerBodyLeft,children:[historyState.currentState===STATE.LOADING?/*#__PURE__*/_jsx(LinearProgress,{}):null,/*#__PURE__*/_jsx(\"div\",{className:\"form-select\",style:{flex:1,overflow:'auto'},id:\"list\",children:isEmpty(historyState.listHistory)?/*#__PURE__*/_jsx(TextListEmpty,{}):props.historyState.listHistory.map(function(item){return/*#__PURE__*/_jsx(TranslationItem,{item:item,id:item.taskId},item.id);})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Pagination,{sx:{display:'flex',marginTop:1,marginBottom:1,justifyContent:'center'},size:\"large\",onChange:handleChange,count:getCount(props.historyState.total)})]}),/*#__PURE__*/_jsx(ResultComponent,{})]})]})});}var mapStateToProps=function mapStateToProps(state){return{historyState:state.historyReducer,navbarState:state.navbarReducer};};var mapDispatchToProps={getHistoryAsync:getHistoryAsync};export default connect(mapStateToProps,mapDispatchToProps)(authHoc(HistoryAndFavorite));","map":{"version":3,"sources":["/workspace/hoangta/translation-backend/frontend/src/screens/HistoryAndFavorite/index.js"],"names":["React","useEffect","styles","Tab","Tabs","Typography","LinearProgress","Divider","connect","useTranslation","ResultComponent","STATE","getHistoryAsync","isEmpty","TranslationItem","Pagination","authHoc","toastError","PER_PAGE","STATUS","TRANSLATIONTYPE","HistoryAndFavorite","props","historyState","navbarState","t","currentState","SUCCESS","FAILURE","err","status","translationType","perPage","page","isLogin","handleChange","event","value","TextListEmpty","p","getCount","total","Math","ceil","display","flex","backgroundColor","height","innerBox","tabBox","fontWeight","innerBody","innerBodyLeft","LOADING","overflow","listHistory","map","item","taskId","id","marginTop","marginBottom","justifyContent","mapStateToProps","state","historyReducer","navbarReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport styles from './historyAndFavorite.module.css';\nimport { \n\tTab, \n\tTabs, \n\tTypography, \n\tLinearProgress,\n\tDivider,\n} from '@mui/material';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport ResultComponent from './components/ResultComponent';\nimport { STATE } from '../../redux/reducers/historyReducer';\nimport { getHistoryAsync } from '../../redux/actions/historyAction';\nimport { isEmpty } from 'lodash';\nimport TranslationItem from './components/TranslationItem';\nimport Pagination from '@mui/material/Pagination';\nimport authHoc from '../../hocs/authHoc';\nimport { toastError } from '../../components/Toast';\n\nconst PER_PAGE = 9;\nconst STATUS = 'translated';\nconst TRANSLATIONTYPE = 'public_plain_text_translation';\n\nfunction HistoryAndFavorite(props) {\n\tconst { historyState, navbarState } = props;\n\tconst { t } = useTranslation();\n\n\t/**\n\t * @description useEffect cho việc check kết quả và báo noti cho \n\t * người dùng\n\t */\n\t\t useEffect(() => {\n\t\tswitch (historyState.currentState) {\n\t\tcase STATE.SUCCESS:\n\t\t\tbreak;\n\t\tcase STATE.FAILURE:\n\t\t\ttoastError(historyState.err);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}, [historyState.currentState]);\n\n\t/**\n\t * @description useEffect cho việc gọi danh sách lúc đầu vào trang\n\t */\n\tuseEffect(() => {\n\t\tprops.getHistoryAsync({\n\t\t\tstatus: STATUS,\n\t\t\ttranslationType: TRANSLATIONTYPE,\n\t\t\tperPage: PER_PAGE,\n\t\t\tpage: 1,\n\t\t});\n\t}, [navbarState.isLogin]);\n\n\t/**\n\t * @description Hàm gọi danh sách khi thay đổi trang\n\t */\n\tconst handleChange = (event, value) => {\n\t\tprops.getHistoryAsync({\n\t\t\tstatus: STATUS,\n\t\t\ttranslationType: TRANSLATIONTYPE,\n\t\t\tperPage: PER_PAGE,\n\t\t\tpage: value,\n\t\t});\n\t};\n\n\t/**\n\t * @description Trả về element chữ cho trường hợp danh sách rỗng\n\t */\n\tconst TextListEmpty = () => {\n\t\treturn  <Typography sx={{p: 2}} align=\"center\" variant=\"subtitle1\">{t('danhSachTrong')}</Typography>;\n\t};\n\n\t/**\n\t * @description Tính toán số trang hiện thị ở pagnination\n\t * VD: total: 100 và perPage: 9, => getCount() trả về 12 \n\t * ? Kết quả thực tế là 11.111 => Làm tròn lên thành 12.\n\t */\n\tconst getCount = (total) => {\n\t\treturn Math.ceil(total/9);\n\t};\n\n\treturn (\n\t\t<div style={{ display: 'flex', flex: 1, backgroundColor: 'white', height:'94vh' }}>\n\t\t\t<div className={styles.innerBox}>\n\t\t\t\t<div className={styles.tabBox}>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tvalue=\"history\"\n\t\t\t\t\t\tvariant=\"scrollable\"\n\t\t\t\t\t\tscrollButtons=\"auto\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tab label={t('History.lichsu')} value={'history'} style={{fontWeight: 'bold'}}/>\n\t\t\t\t\t</Tabs>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.innerBody}>\n\t\t\t\t\t<div className={styles.innerBodyLeft}>\n\t\t\t\t\t\t{/* <div className={styles.innerSearchBox}>\n\t\t\t\t\t\t\t<InputBase\n\t\t\t\t\t\t\t\tsx={{ ml: 1, flex: 1 }}\n\t\t\t\t\t\t\t\tplaceholder=\"Tìm kiếm\"\n\t\t\t\t\t\t\t\tinputProps={{ 'aria-label': 'Tìm kiếm' }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<IconButton type=\"submit\" sx={{ p: '10px' }} aria-label=\"search\">\n\t\t\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t{historyState.currentState === STATE.LOADING ? <LinearProgress /> : null}\n\t\t\t\t\t\t<div className=\"form-select\" style={{flex: 1, overflow: 'auto'}} id='list'>\n\t\t\t\t\t\t\t{isEmpty(historyState.listHistory) ?  \n\t\t\t\t\t\t\t\t<TextListEmpty /> \n\t\t\t\t\t\t\t\t: props.historyState.listHistory.map((item) => <TranslationItem key={item.id} item={item} id={item.taskId}/>)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\tsx={{display: 'flex', marginTop: 1, marginBottom: 1, justifyContent: 'center'}}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tcount={getCount(props.historyState.total)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ResultComponent />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{/* <FeedBack\n\t\t\t\tshow={modelShown}\n\t\t\t\tonHide={() => setModelShown(false)} \n\t\t\t/> */}\n\t\t</div>\n\t);\n}\n\nHistoryAndFavorite.propTypes = {\n\thistoryState: PropTypes.object,\n\tnavbarState: PropTypes.object,\n\tgetHistoryAsync: PropTypes.func,\n};\n\nconst mapStateToProps = (state) => ({\n\thistoryState: state.historyReducer,\n\tnavbarState: state.navbarReducer,\n});\n\nconst mapDispatchToProps = { \n\tgetHistoryAsync\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(authHoc(HistoryAndFavorite));"]},"metadata":{},"sourceType":"module"}