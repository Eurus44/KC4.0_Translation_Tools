{"ast":null,"code":"import _regeneratorRuntime from\"/home/hoangta/workspace/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hoangta/workspace/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/hoangta/workspace/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Modal,Form,Input}from'antd';import*as axiosHelper from'../../helpers/axiosHelper';import{changeIsLogin}from'../../redux/actions/navbarAction';import{getCurrentUser}from'../../redux/actions/userAction';import{useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import{ACCESS_TOKEN,REFRESH_TOKEN}from'../../constants/envVar';import{useTranslation}from'react-i18next';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginModal=function LoginModal(props){var dispatch=useDispatch();var history=useHistory();var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var visible=props.visible,setVisible=props.setVisible;var _useTranslation=useTranslation(),t=_useTranslation.t;var onCancel=function onCancel(){setVisible(false);};var onSubmit=function onSubmit(){form.submit();};var onCreate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var siginInResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosHelper.SignIn(values);case 3:siginInResult=_context.sent;dispatch(changeIsLogin(true));dispatch(getCurrentUser());localStorage.setItem(ACCESS_TOKEN,siginInResult.data.accessToken);localStorage.setItem(REFRESH_TOKEN,siginInResult.data.refreshToken);history.push('/translate');setVisible(false);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);alert(_context.t0);setVisible(false);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function onCreate(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Modal,{visible:visible,title:t('login'),okText:t('login'),cancelText:t('cancel'),onCancel:onCancel,onOk:onSubmit,children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",form:form,onFinish:onCreate,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"username\",label:t('username'),children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",label:t('password'),children:/*#__PURE__*/_jsx(Input,{type:\"password\"})})]})});};export default LoginModal;","map":{"version":3,"sources":["/home/hoangta/workspace/translation-backend/frontend/src/components/LoginModal/index.js"],"names":["React","Modal","Form","Input","axiosHelper","changeIsLogin","getCurrentUser","useDispatch","useHistory","ACCESS_TOKEN","REFRESH_TOKEN","useTranslation","LoginModal","props","dispatch","history","useForm","form","visible","setVisible","t","onCancel","onSubmit","submit","onCreate","values","SignIn","siginInResult","localStorage","setItem","data","accessToken","refreshToken","push","alert"],"mappings":"8fAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,CAAgBC,IAAhB,CAAsBC,KAAtB,KAAoC,MAApC,CAEA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,2BAA7B,CACA,OAASC,aAAT,KAA8B,kCAA9B,CACA,OAASC,cAAT,KAA+B,gCAA/B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,YAAT,CAAuBC,aAAvB,KAA2C,wBAA3C,CACA,OAASC,cAAT,KAA+B,eAA/B,C,wFACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC7B,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CACA,kBAAeN,IAAI,CAACc,OAAL,EAAf,gDAAOC,IAAP,mBACA,GAAQC,CAAAA,OAAR,CAAgCL,KAAhC,CAAQK,OAAR,CAAiBC,UAAjB,CAAgCN,KAAhC,CAAiBM,UAAjB,CACA,oBAAeR,cAAc,EAA7B,CAAQS,CAAR,iBAAQA,CAAR,CACA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACtBF,UAAU,CAAC,KAAD,CAAV,CACA,CAFD,CAIA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACtBL,IAAI,CAACM,MAAL,GACA,CAFD,CAIA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,MAAP,0KAEarB,CAAAA,WAAW,CAACsB,MAAZ,CAAmBD,MAAnB,CAFb,QAETE,aAFS,eAGfb,QAAQ,CAACT,aAAa,CAAC,IAAD,CAAd,CAAR,CACAS,QAAQ,CAACR,cAAc,EAAf,CAAR,CACAsB,YAAY,CAACC,OAAb,CAAqBpB,YAArB,CAAmCkB,aAAa,CAACG,IAAd,CAAmBC,WAAtD,EACAH,YAAY,CAACC,OAAb,CAAqBnB,aAArB,CAAoCiB,aAAa,CAACG,IAAd,CAAmBE,YAAvD,EACAjB,OAAO,CAACkB,IAAR,CAAa,YAAb,EACAd,UAAU,CAAC,KAAD,CAAV,CARe,iFAUfe,KAAK,aAAL,CACAf,UAAU,CAAC,KAAD,CAAV,CAXe,qEAAH,kBAARK,CAAAA,QAAQ,4CAAd,CAgBA,mBAAQ,KAAC,KAAD,EACP,OAAO,CAAEN,OADF,CAEP,KAAK,CAAEE,CAAC,CAAC,OAAD,CAFD,CAGP,MAAM,CAAEA,CAAC,CAAC,OAAD,CAHF,CAIP,UAAU,CAAEA,CAAC,CAAC,QAAD,CAJN,CAKP,QAAQ,CAAEC,QALH,CAMP,IAAI,CAAEC,QANC,uBAQP,MAAC,IAAD,EAAM,MAAM,CAAC,UAAb,CAAwB,IAAI,CAAEL,IAA9B,CAAoC,QAAQ,CAAEO,QAA9C,wBACC,KAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,UAAhB,CAA2B,KAAK,CAAEJ,CAAC,CAAC,UAAD,CAAnC,uBACC,KAAC,KAAD,IADD,EADD,cAIC,KAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,UAAhB,CAA2B,KAAK,CAAEA,CAAC,CAAC,UAAD,CAAnC,uBACC,KAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,EADD,EAJD,GARO,EAAR,CAiBA,CA/CD,CAuDA,cAAeR,CAAAA,UAAf","sourcesContent":["import React from 'react';\nimport { Modal, Form, Input, } from 'antd';\nimport PropTypes from 'prop-types';\nimport * as axiosHelper from '../../helpers/axiosHelper';\nimport { changeIsLogin } from '../../redux/actions/navbarAction';\nimport { getCurrentUser } from '../../redux/actions/userAction';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { ACCESS_TOKEN, REFRESH_TOKEN} from '../../constants/envVar';\nimport { useTranslation } from 'react-i18next';\nconst LoginModal = (props) => {\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst [form] = Form.useForm();\n\tconst { visible, setVisible } = props;\n\tconst { t }  = useTranslation();\n\tconst onCancel = () => {\n\t\tsetVisible(false);\n\t};\n\n\tconst onSubmit = () => {\n\t\tform.submit();\n\t};\n\n\tconst onCreate = async (values) => {\n\t\ttry {\n\t\t\tconst siginInResult = await axiosHelper.SignIn(values);\n\t\t\tdispatch(changeIsLogin(true));\n\t\t\tdispatch(getCurrentUser());\n\t\t\tlocalStorage.setItem(ACCESS_TOKEN, siginInResult.data.accessToken);\n\t\t\tlocalStorage.setItem(REFRESH_TOKEN, siginInResult.data.refreshToken);\n\t\t\thistory.push('/translate');\n\t\t\tsetVisible(false);\n\t\t}catch (e) {\n\t\t\talert(e);\n\t\t\tsetVisible(false);\n\t\t}\n\t};\n\n\n\treturn (<Modal\n\t\tvisible={visible}\n\t\ttitle={t('login')}\n\t\tokText={t('login')}\n\t\tcancelText={t('cancel')}\n\t\tonCancel={onCancel}\n\t\tonOk={onSubmit}\n\t>\n\t\t<Form layout=\"vertical\" form={form} onFinish={onCreate}>\n\t\t\t<Form.Item name='username' label={t('username')}>\n\t\t\t\t<Input/>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item name='password' label={t('password')}>\n\t\t\t\t<Input type=\"password\"/>\n\t\t\t</Form.Item>\n\t\t</Form>\n\t</Modal>);\n};\n\nLoginModal.propTypes = {\n\tvisible: PropTypes.bool,\n\tsetVisible: PropTypes.func,\n\n};\n\nexport default LoginModal;"]},"metadata":{},"sourceType":"module"}