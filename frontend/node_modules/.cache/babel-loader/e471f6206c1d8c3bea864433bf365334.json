{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/hoangta/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/workspace/hoangta/translation-backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{toastError,toastInformLimitReached}from'../components/Toast';import{ACCESS_TOKEN}from'../constants/envVar';var SERVER_URL=process.env.REACT_APP_SERVER_URL;var queryString=require('query-string');var axiosDefault=axios.create({// baseURL: 'http://nmtuet.ddns.net:1710/',\nbaseURL:SERVER_URL,headers:{'Content-Type':'application/json'},timeout:10000});var axios2=axios.create({// baseURL: 'http://nmtuet.ddns.net:1710/',\nbaseURL:SERVER_URL,headers:{'Content-Type':'application/json'},timeout:10000});axiosDefault.interceptors.request.use(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(config){var acc_token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:acc_token=localStorage.getItem(ACCESS_TOKEN);if(acc_token){config.headers.Authorization=\"\".concat(acc_token);}return _context.abrupt(\"return\",config);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()// error => Promise.reject(error),\n);axios2.interceptors.request.use(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(config){var acc_token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:acc_token=localStorage.getItem(ACCESS_TOKEN);if(acc_token){config.headers.Authorization=\"\".concat(acc_token);}return _context2.abrupt(\"return\",config);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()// error => Promise.reject(error),\n);// Add a response interceptor\naxiosDefault.interceptors.response.use(function(response){// Any status code that lie within the range of 2xx cause this function to trigger\n// Do something with response data\nreturn response;},function(error){if(error.response.data.message!=='text_translate_limit_reached'&&error.response.data.message!=='audio_translate_limit_reached'){toastError(error.response.data.message);}return Promise.reject(error);});export var SignInWithGoogle=function SignInWithGoogle(body){return new Promise(function(resolve,reject){axiosDefault.post('user/auth',body).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var SignIn=function SignIn(body){return new Promise(function(resolve,reject){axiosDefault.post('user/login',body).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var CreateUserByAdmin=function CreateUserByAdmin(body){return new Promise(function(resolve,reject){axiosDefault.post('admin/user',body).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var updateUserQuota=function updateUserQuota(body){return new Promise(function(resolve,reject){axiosDefault.put('admin/user/update_quota',body).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var downloadFile=function downloadFile(url,file_type){axios({url:SERVER_URL+url,method:'GET',responseType:'blob'// important\n}).then(function(response){var url=window.URL.createObjectURL(new Blob([response.data]));var link=document.createElement('a');var file_name=file_type=='txt'?'file.txt':'file.docx';link.href=url;link.setAttribute('download',file_name);document.body.appendChild(link);link.click();});};export var SignOut=function SignOut(){return new Promise(function(resolve,reject){axios2.post('user/logout').then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var getMe=function getMe(){return new Promise(function(resolve,reject){axios2.get('user/me').then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var getUser=function getUser(id){return new Promise(function(resolve,reject){axiosDefault.get('user',{params:{id:id}}).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var getUserList=function getUserList(params){var _params=queryString.stringify(params);return new Promise(function(resolve,reject){axiosDefault.get('user/search',{params:_params}).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var updateUser=function updateUser(body){return new Promise(function(resolve,reject){axiosDefault.put('user/other',body).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var RefreshToken=function RefreshToken(body){return new Promise(function(resolve,reject){axiosDefault.post('user/auth',body).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var translateFile=function translateFile(body){return new Promise(function(resolve,reject){axiosDefault({headers:{'Content-Type':'multipart/form-data'},method:'POST',url:'translate_f',data:body// body: body,\n}).then(function(result){resolve(result.data);}).catch(function(error){if(error.response.data.message=='text_translate_limit_reached'){var _error$response$data$=error.response.data.data,used=_error$response$data$.used,quota=_error$response$data$.quota;var message=error.response.data.message;toastInformLimitReached(message,used,quota,'text');}reject(error);});});};// sample data\n// { \"sourceText\": \"string\", \"sourceLang\": \"zh\", \"targetLang\": \"zh\"\nexport var postTranslate=function postTranslate(body){return new Promise(function(resolve,reject){axiosDefault.post('translate',body).then(function(result){resolve(result.data);}).catch(function(error){if(error.response.data.message=='text_translate_limit_reached'){var _error$response$data$2=error.response.data.data,used=_error$response$data$2.used,quota=_error$response$data$2.quota;var message=error.response.data.message;toastInformLimitReached(message,used,quota,'text');}reject(error);});});};// sample data\n// { \"translationHistoryId\": \"string\", \"taskId\": \"string\",\nexport var getTranslateHistoryGetSingle=function getTranslateHistoryGetSingle(params){return new Promise(function(resolve,reject){axiosDefault({method:'GET',url:'translation-history/get-single',params:params}).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};// sample data\n// { \"translationHistoryId\": \"string\", \"taskId\": \"string\",\nexport var getDetectionHistoryGetSingle=function getDetectionHistoryGetSingle(params){return new Promise(function(resolve,reject){axiosDefault.get('lang-detection-history/get-single',{params:params}).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};// sample data\n// { \"sourceTexr\": \"string\",\nexport var detectLangInstant=function detectLangInstant(body){return new Promise(function(resolve,reject){axiosDefault.post('detect-lang',body).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};// sample data\nexport var getTranslateResult=function getTranslateResult(resultUrl){return new Promise(function(resolve,reject){axiosDefault({url:resultUrl,method:'GET'}).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};export var getTranslateHistory=function getTranslateHistory(params){return new Promise(function(resolve,reject){axiosDefault({url:'translation-history',method:'GET',params:params}).then(function(result){resolve(result.data);}).catch(function(error){reject(error);});});};// -------------- API từ dưới xuống là của http://nmtuet.ddns.net:1710/ ------------- //\n// sample data\n// {\"data\":\"年我国利用外\",\"direction\":\"zh-vi\"}\n// eslint-disable-next-line no-unused-vars\nexport var createTranslation=function createTranslation(data){return new Promise(function(resolve,reject){axiosDefault.post('translate_paragraphs',data).then(function(result){resolve(result.data);}).catch(function(error){// console.warn('axios helper', error);\nreject(error);});});};/**\n   * @description Call api nhận dạng ngôn ngũ\n   * @input {\n   * \t\t\tdata: string\n   * \t\t}\n   * @output {lang: string, lang_str: string, status: boolean}\n   */export var detectLang=function detectLang(data){return new Promise(function(resolve,reject){axiosDefault.post('detect_lang',data).then(function(result){resolve(result.data);}).catch(function(error){// console.warn('axios helper', error);\nreject(error);});});};","map":{"version":3,"sources":["/workspace/hoangta/translation-backend/frontend/src/helpers/axiosHelper.js"],"names":["axios","toastError","toastInformLimitReached","ACCESS_TOKEN","SERVER_URL","process","env","REACT_APP_SERVER_URL","queryString","require","axiosDefault","create","baseURL","headers","timeout","axios2","interceptors","request","use","config","acc_token","localStorage","getItem","Authorization","response","error","data","message","Promise","reject","SignInWithGoogle","body","resolve","post","then","result","catch","SignIn","CreateUserByAdmin","updateUserQuota","put","downloadFile","url","file_type","method","responseType","window","URL","createObjectURL","Blob","link","document","createElement","file_name","href","setAttribute","appendChild","click","SignOut","getMe","get","getUser","id","params","getUserList","_params","stringify","updateUser","RefreshToken","translateFile","used","quota","postTranslate","getTranslateHistoryGetSingle","getDetectionHistoryGetSingle","detectLangInstant","getTranslateResult","resultUrl","getTranslateHistory","createTranslation","detectLang"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { toastError, toastInformLimitReached } from '../components/Toast';\nimport { ACCESS_TOKEN } from '../constants/envVar';\nconst SERVER_URL = process.env.REACT_APP_SERVER_URL;\n\nconst queryString = require('query-string');\n\n\nconst axiosDefault = axios.create({\n\t// baseURL: 'http://nmtuet.ddns.net:1710/',\n\tbaseURL: SERVER_URL,\n\theaders: {\n\t\t'Content-Type': 'application/json',\n\t},\n\ttimeout: 10000,\n});\n\nconst axios2 = axios.create({\n\t// baseURL: 'http://nmtuet.ddns.net:1710/',\n\tbaseURL: SERVER_URL,\n\theaders: {\n\t\t'Content-Type': 'application/json',\n\t},\n\ttimeout: 10000,\n});\n\naxiosDefault.interceptors.request.use(\n\tasync config => {\n\t\tconst acc_token = localStorage.getItem(ACCESS_TOKEN);\n\t\tif (acc_token) {\n\t\t\tconfig.headers.Authorization = `${acc_token}`;\n\t\t}\n\t\treturn config;\n\t},\n\t// error => Promise.reject(error),\n);\n\naxios2.interceptors.request.use(\n\tasync config => {\n\t\tconst acc_token = localStorage.getItem(ACCESS_TOKEN);\n\t\tif (acc_token) {\n\t\t\tconfig.headers.Authorization = `${acc_token}`;\n\t\t}\n\t\treturn config;\n\t},\n\t// error => Promise.reject(error),\n);\n\n\n// Add a response interceptor\naxiosDefault.interceptors.response.use(function (response) {\n\t// Any status code that lie within the range of 2xx cause this function to trigger\n\t// Do something with response data\n\treturn response;\n}, function (error) {\n\tif (error.response.data.message !== 'text_translate_limit_reached' && error.response.data.message !== 'audio_translate_limit_reached') {\n\t\ttoastError(error.response.data.message);\n\t}\n\treturn Promise.reject(error);\n});\n\nexport const SignInWithGoogle = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.post('user/auth', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const SignIn = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.post('user/login', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const CreateUserByAdmin = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.post('admin/user', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const updateUserQuota = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.put('admin/user/update_quota', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const downloadFile = (url, file_type) => {\n\taxios({\n\t\turl: SERVER_URL + url,\n\t\tmethod: 'GET',\n\t\tresponseType: 'blob', // important\n\t}).then((response) => {\n\t\tconst url = window.URL.createObjectURL(new Blob([response.data]));\n\t\tconst link = document.createElement('a');\n\t\tconst file_name = file_type == 'txt' ? 'file.txt' : 'file.docx';\n\t\tlink.href = url;\n\t\tlink.setAttribute('download', file_name);\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t});\n};\n\nexport const SignOut = () => {\n\treturn new Promise((resolve, reject) => {\n\t\taxios2.post('user/logout')\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const getMe = () => {\n\treturn new Promise((resolve, reject) => {\n\t\taxios2.get('user/me')\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const getUser = (id) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.get('user', { params: { id } })\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const getUserList = (params) => {\n\tconst _params = queryString.stringify(params);\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.get('user/search', { params: _params })\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const updateUser = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.put('user/other', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n\nexport const RefreshToken = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.post('user/auth', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const translateFile = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault({\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'multipart/form-data',\n\t\t\t},\n\t\t\tmethod: 'POST',\n\t\t\turl: 'translate_f',\n\t\t\tdata: body,\n\t\t\t// body: body,\n\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tif (error.response.data.message == 'text_translate_limit_reached') {\n\t\t\t\t\tconst { used, quota } = error.response.data.data;\n\t\t\t\t\tconst { message } = error.response.data;\n\t\t\t\t\ttoastInformLimitReached(message, used, quota, 'text');\n\t\t\t\t}\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n// sample data\n// { \"sourceText\": \"string\", \"sourceLang\": \"zh\", \"targetLang\": \"zh\"\nexport const postTranslate = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.post('translate', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tif (error.response.data.message == 'text_translate_limit_reached') {\n\t\t\t\t\tconst { used, quota } = error.response.data.data;\n\t\t\t\t\tconst { message } = error.response.data;\n\t\t\t\t\ttoastInformLimitReached(message, used, quota, 'text');\n\t\t\t\t}\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n// sample data\n// { \"translationHistoryId\": \"string\", \"taskId\": \"string\",\nexport const getTranslateHistoryGetSingle = (params) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault({\n\t\t\tmethod: 'GET',\n\t\t\turl: 'translation-history/get-single',\n\t\t\tparams,\n\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n// sample data\n// { \"translationHistoryId\": \"string\", \"taskId\": \"string\",\nexport const getDetectionHistoryGetSingle = (params) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.get('lang-detection-history/get-single', {\n\t\t\tparams\n\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n// sample data\n// { \"sourceTexr\": \"string\",\nexport const detectLangInstant = (body) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault.post('detect-lang', body)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n// sample data\nexport const getTranslateResult = (resultUrl) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault({\n\t\t\turl: resultUrl,\n\t\t\tmethod: 'GET',\n\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\nexport const getTranslateHistory = (params) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault({\n\t\t\turl: 'translation-history',\n\t\t\tmethod: 'GET',\n\t\t\tparams,\n\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n// -------------- API từ dưới xuống là của http://nmtuet.ddns.net:1710/ ------------- //\n\n// sample data\n// {\"data\":\"年我国利用外\",\"direction\":\"zh-vi\"}\n// eslint-disable-next-line no-unused-vars\nexport const createTranslation = (data) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault\n\t\t\t.post('translate_paragraphs', data)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\t// console.warn('axios helper', error);\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n\n/**\n   * @description Call api nhận dạng ngôn ngũ\n   * @input {\n   * \t\t\tdata: string\n   * \t\t}\n   * @output {lang: string, lang_str: string, status: boolean}\n   */\nexport const detectLang = (data) => {\n\treturn new Promise((resolve, reject) => {\n\t\taxiosDefault\n\t\t\t.post('detect_lang', data)\n\t\t\t.then((result) => {\n\t\t\t\tresolve(result.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\t// console.warn('axios helper', error);\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n};\n"]},"metadata":{},"sourceType":"module"}